{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4 text-center">ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ø§Ø®Øµâ€ŒÙ‡Ø§ - {{ month }}/{{ year }}</h2>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show text-center" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}

    {% if editable %}
        <div class="alert alert-success text-center">
            <strong>Ù…Ø§Ù‡ ÙØ¹Ø§Ù„:</strong> Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø§Ø®Øµâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø§Ù‡ Ø«Ø¨Øª ÛŒØ§ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯.
        </div>
    {% else %}
        <div class="alert alert-warning text-center">
            <strong>ØªÙˆØ¬Ù‡:</strong> Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ù‡ÛŒÚ† Ù…Ø§Ù‡ ÙØ¹Ø§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.
            Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ ÙÙ‚Ø· Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ø³ØªÙ†Ø¯.
        </div>
    {% endif %}

    {% if form_data %}
    <form method="post">
        {% csrf_token %}
        <table class="table table-striped table-bordered align-middle text-center">
            <thead class="table-light">
                <tr>
                    <th style="width: 15%;">Ú©Ø¯ Ø´Ø§Ø®Øµ</th>
                    <th style="width: 25%;">Ù†Ø§Ù… Ø´Ø§Ø®Øµ</th>
                    <th style="width: 10%;">ÙˆØ§Ø­Ø¯</th>
                    <th style="width: 15%;">Ù‡Ø¯Ù Ù…Ø§Ù‡</th>
                    <th style="width: 15%;">Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ù‚Ø¹ÛŒ</th>
                    <th style="width: 20%;">Ø¯Ø±ØµØ¯ ØªØ­Ù‚Ù‚</th>
                </tr>
            </thead>
            <tbody>
                {% for item in form_data %}  <!-- ØªØºÛŒÛŒØ± Ø§Ø² forms Ø¨Ù‡ form_data -->
                    <tr>
                        <td>{{ item.indicator.code }}</td>
                        <td>{{ item.indicator.name }}</td>
                        <td>{{ item.indicator.get_unit_display }}</td>
                        <td>
                            {% if item.target %}
                                {{ item.target }}
                            {% else %}
                                <span class="text-muted">â€”</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if editable %}
                                {{ item.form.value }}
                            {% else %}
                                <input type="text" value="{{ item.form.instance.value|default_if_none:'' }}" class="form-control text-center" disabled>
                            {% endif %}
                            {{ item.form.indicator }}
                            {{ item.form.month }}
                            {{ item.form.year }}
                        </td>
                        <td>
                            {% if item.percent %}
                                {{ item.percent }}Ùª
                            {% else %}
                                <span class="text-muted">â€”</span>
                            {% endif %}
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="6" class="text-muted">Ù‡ÛŒÚ† Ø´Ø§Ø®ØµÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        {% if editable %}
            <div class="text-center mt-3">
                <button type="submit" class="btn btn-success px-4">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</button>
            </div>
        {% endif %}
    </form>
    {% else %}
    <div class="alert alert-info text-center">
        <h5>Ù‡ÛŒÚ† Ø´Ø§Ø®ØµÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</h5>
        <p>Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ… ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯ ØªØ§ Ø´Ø§Ø®Øµâ€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø´Ù…Ø§ Ø±Ø§ ØªØ¹Ø±ÛŒÙ Ú©Ù†Ø¯.</p>
    </div>
    {% endif %}
</div>

<style>
.form-control {
    text-align: center !important;
    direction: ltr !important;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.form-control:disabled {
    text-align: center !important;
    direction: ltr !important;
}
</style>
{% endblock %}